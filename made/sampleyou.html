<!--ãƒ”ã‚¯ãƒ­ã‚¹ã‚µãƒ³ãƒ—ãƒ«-->
<!--<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nazotoki-ã¦ã‚‹ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</title>
    <link rel="stylesheet" href="../style/index.css">
    <link rel="stylesheet" href="../style/sampleyou.css">
</head>

<body>
    <header>
        <div class="container">
            <a href="../index.html" id="title">
                <h6>ã¦ã‚‹ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</h6>
            </a>
            <nav>
                <ul id="navi">
                    <li><a href="../myprofile.html">è‡ªå·±ç´¹ä»‹</a></li>
                    <li><a href="../diary.html">æ—¥è¨˜</a></li>
                    <li><a href="../works.html">ä½œã£ãŸã‚‚ã®</a></li>
                    <li><a href="../contact.html">å•ã„åˆã‚ã›</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        
<body>

<div id="puzzle">

</div>


    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 ã¦ã‚‹</p>
        </div>
    </footer>

    <script src="../script/sampleyou.js"></script>
</body>

</html>-->

<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>5x5 ãƒ”ã‚¯ãƒ­ã‚¹ - å­¦ç¿’ç”¨ã‚µãƒ³ãƒ—ãƒ«</title>
<style>
  :root{
    --bg: #0b0f13;
    --panel: #0f1720;
    --accent: #26f0ff;
    --muted: #8aa0b0;
    --cell: #0b1220;
    --filled: linear-gradient(135deg,#26f0ff 0%, #007ab8 100%);
    --size: 52px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    color:#edf8ff;
    font-family: "Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    display:flex;
    min-height:100vh;
    align-items:flex-start;
    justify-content:center;
    padding:40px 20px;
  }

  .wrap{
    width:100%;
    max-width:920px;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }
  .title{
    font-size:20px;
    font-weight:700;
    color:var(--accent);
  }
  .controls{display:flex;gap:8px;align-items:center}
  button.ctrl{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--muted);
    padding:8px 10px;
    border-radius:8px;
    cursor:pointer;
  }
  button.ctrl:hover{border-color:var(--accent); color:var(--accent)}

  .picross{
    display:grid;
    grid-template-columns: 90px 1fr;
    grid-template-rows: 90px 1fr;
    gap:8px;
    align-items:start;
  }

  .corner{
    grid-column:1/2;
    grid-row:1/2;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--muted);
    font-size:13px;
    background:transparent;
  }

  /* åˆ—ãƒ’ãƒ³ãƒˆï¼ˆä¸Šï¼‰ */
  .col-hints{
    grid-column:2/3;
    grid-row:1/2;
    display:grid;
    place-items:end stretch;
    padding-left:6px;
  }
  .col-hints .columns {
    display:grid;
    grid-auto-flow:column;
    gap:4px;
    justify-content:start;
  }
  .col {
    width:var(--size);
    height:90px; /* ä¸Šã«ä¸¦ã¹ã‚‹ãƒ’ãƒ³ãƒˆã®é«˜ã• */
    display:flex;
    flex-direction:column-reverse; /* ä¸‹æƒãˆã§è¡¨ç¤ºã™ã‚‹ï¼ˆä¸€èˆ¬çš„ãªãƒ”ã‚¯ãƒ­ã‚¹è¡¨ç¤ºï¼‰ */
    justify-content:flex-start;
    align-items:center;
    padding:4px 2px;
    color:var(--muted);
    font-size:13px;
  }
  .col .hint-num{ margin:2px 0; color:var(--muted); font-weight:700; }

  /* è¡Œãƒ’ãƒ³ãƒˆï¼ˆå·¦ï¼‰ */
  .row-hints{
    grid-column:1/2;
    grid-row:2/3;
    display:flex;
    flex-direction:column;
    gap:4px;
    padding-top:6px;
  }
  .row {
    height:var(--size);
    width:90px;
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:6px;
    padding-right:8px;
    color:var(--muted);
    font-weight:700;
  }
  .row .hint-num{ font-size:13px; color:var(--muted) }

  /* ã‚²ãƒ¼ãƒ ç›¤ */
  .grid {
    grid-column:2/3;
    grid-row:2/3;
    padding:6px;
    background:transparent;
  }
  .cells {
    display:grid;
    gap:6px;
    /* columns will be set dynamically from JS */
  }
  .cell {
    width:var(--size);
    height:var(--size);
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background:var(--cell);
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    user-select:none;
    color:rgba(255,255,255,0.9);
    font-weight:800;
    position:relative;
    font-size:18px;
  }
  .cell.filled{
    background:var(--filled);
    box-shadow:0 8px 20px rgba(0,122,184,0.18), inset 0 -6px 18px rgba(0,0,0,0.35);
    border:1px solid rgba(255,255,255,0.06);
  }
  .cell.marked{
    background:transparent;
    color:#ff6b6b;
  }

  .help{
    margin-top:12px;
    color:var(--muted);
    font-size:13px;
  }

  .win-overlay{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.6));
    z-index:100;
  }
  .win-card{
    background:var(--panel);
    padding:24px;
    border-radius:12px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.04);
  }
  .win-card h2{ color:var(--accent); margin:0 0 8px 0 }
  .muted-small{ color:var(--muted); font-size:13px; margin-top:6px }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">ãƒ”ã‚¯ãƒ­ã‚¹ï¼ˆå­¦ç¿’ç”¨ï¼‰ â€” 5Ã—5 ãƒ‡ãƒ¢</div>
      <div class="controls">
        <button class="ctrl" id="btn-reset">ãƒªã‚»ãƒƒãƒˆ</button>
        <button class="ctrl" id="btn-reveal">è§£ç­”è¡¨ç¤º</button>
        <button class="ctrl" id="btn-clear-local">é€²æ—ã‚¯ãƒªã‚¢</button>
      </div>
    </header>

    <div class="picross" id="picross">
      <div class="corner">å·¦ã‚¯ãƒªãƒƒã‚¯: å¡—ã‚‹ / å³ã‚¯ãƒªãƒƒã‚¯: Ã—ï¼ˆå°ï¼‰</div>

      <div class="col-hints">
        <div class="columns" id="col-hints"></div>
      </div>

      <div class="row-hints" id="row-hints"></div>

      <div class="grid">
        <div class="cells" id="cells"></div>
      </div>
    </div>

    <div class="help">
      ãƒ»å³ã‚¯ãƒªãƒƒã‚¯ã§ãƒãƒ¼ã‚¯ï¼ˆÃ—ï¼‰ã‚’ä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚<br>
      ãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã§é€²æ—ã‚’ä¿æŒã—ã¾ã™ã€‚è¡¨ç¤ºã‚’å¤‰ãˆãŸã„å ´åˆã¯ã‚½ãƒ¼ã‚¹å†…ã® <code>solution</code> ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
    </div>
  </div>

  <div class="win-overlay" id="win">
    <div class="win-card">
      <h2>ã‚¯ãƒªã‚¢ï¼ğŸ‰</h2>
      <div class="muted-small">å•é¡Œã‚’æ­£ã—ãå¡—ã‚Šã¤ã¶ã—ã¾ã—ãŸã€‚ãŠç–²ã‚Œã•ã¾ï¼</div>
      <div style="margin-top:12px;">
        <button class="ctrl" id="win-close">é–‰ã˜ã‚‹</button>
      </div>
    </div>
  </div>

<script>
/*
  ä½¿ã„æ–¹ãƒ»æ³¨æ„:
  - GRID_SIZE ã‚’å¤‰ãˆã‚‹ã¨ç›¤ã®å¤§ãã•ã‚’å¤‰æ›´ã§ãã¾ã™ï¼ˆãŸã ã— solution é…åˆ—ã‚‚åˆã‚ã›ã¦å¤‰æ›´ã—ã¦ãã ã•ã„ï¼‰ã€‚
  - å·¦ã‚¯ãƒªãƒƒã‚¯ã§å¡—ã‚Šã¤ã¶ã—(toggle)ã€å³ã‚¯ãƒªãƒƒã‚¯ã§ãƒãƒ¼ã‚¯ï¼ˆXï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚
  - è§£ç­”ï¼ˆsolutionï¼‰ã¯ä¸‹ã®é…åˆ—ã§å®šç¾©ã€‚
*/

const GRID_SIZE = 5;

/* ====== ã“ã“ãŒæ­£è§£ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ0/1ï¼‰ ======
   solution[row][col] ã®å½¢ã§è¨˜è¿°ã™ã‚‹ã€‚
   5x5 ã®ä¾‹ã‚’å…¥ã‚Œã¦ã‚ã‚Šã¾ã™ã€‚å¤‰æ›´ã—ã¦ç·´ç¿’ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
*/
const solution = [
  [0,1,1,1,0],
  [1,1,1,1,1],
  [1,0,1,0,1],
  [1,1,1,1,1],
  [1,0,0,0,1]
];
/* ======================================= */

if (solution.length !== GRID_SIZE || solution.some(r => r.length !== GRID_SIZE)) {
  console.error("solution é…åˆ—ã®ã‚µã‚¤ã‚ºãŒ GRID_SIZE ã¨ä¸€è‡´ã—ã¦ã„ã¾ã›ã‚“ã€‚");
}

/* ã‚»ãƒ«çŠ¶æ…‹ã®å®šç¾©:
   0 = ç©º
   1 = å¡—ã‚Šï¼ˆfilledï¼‰
   2 = ãƒãƒ¼ã‚¯ï¼ˆXï¼‰
*/
let state = Array.from({length: GRID_SIZE}, () => Array(GRID_SIZE).fill(0));

const cellsEl = document.getElementById('cells');
const colHintsEl = document.getElementById('col-hints');
const rowHintsEl = document.getElementById('row-hints');
const winEl = document.getElementById('win');

function saveProgress() {
  try {
    localStorage.setItem('picross-progress', JSON.stringify(state));
  } catch(e){ console.warn("ä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ:", e) }
}
function loadProgress() {
  try {
    const raw = localStorage.getItem('picross-progress');
    if (!raw) return false;
    const parsed = JSON.parse(raw);
    if (Array.isArray(parsed) && parsed.length === GRID_SIZE) {
      state = parsed;
      return true;
    }
  } catch(e){ console.warn("èª­ã¿è¾¼ã¿å¤±æ•—", e) }
  return false;
}
function clearProgress() {
  localStorage.removeItem('picross-progress');
  state = Array.from({length: GRID_SIZE}, () => Array(GRID_SIZE).fill(0));
  renderGrid();
}

/* ãƒ’ãƒ³ãƒˆã‚’æ­£è§£é…åˆ—ã‹ã‚‰ç”Ÿæˆã™ã‚‹é–¢æ•° */
function computeRuns(arr){
  const runs = [];
  let cnt = 0;
  for (let v of arr) {
    if (v) cnt++;
    else {
      if (cnt>0) { runs.push(cnt); cnt=0; }
    }
  }
  if (cnt>0) runs.push(cnt);
  return runs; // ç©ºé…åˆ—ã¯ã€Œä½•ã‚‚ç„¡ã„ã€ï¼ç©ºè¡¨ç¤º
}
function computeRowHints(sol) {
  return sol.map(row => computeRuns(row));
}
function computeColHints(sol) {
  const cols = [];
  for (let c=0;c<GRID_SIZE;c++){
    const col = [];
    for (let r=0;r<GRID_SIZE;r++) col.push(sol[r][c]);
    cols.push(computeRuns(col));
  }
  return cols;
}

/* ãƒ’ãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */
function renderHints() {
  // åˆ—ãƒ’ãƒ³ãƒˆï¼ˆä¸Šï¼‰
  colHintsEl.innerHTML = '';
  const colHints = computeColHints(solution);
  const columnsWrap = document.createElement('div');
  columnsWrap.className = 'columns';
  columnsWrap.style.gridTemplateColumns = `repeat(${GRID_SIZE}, ${getComputedStyle(document.documentElement).getPropertyValue('--size') || '52px'})`;
  for (let c=0;c<GRID_SIZE;c++){
    const colDiv = document.createElement('div');
    colDiv.className = 'col';
    const hints = colHints[c];
    if (hints.length === 0) {
      // ç©ºã®æ™‚ã¯ä½•ã‚‚è¡¨ç¤ºã—ãªã„ï¼ˆç©ºç™½ï¼‰
      const span = document.createElement('div');
      span.className = 'hint-num';
      span.textContent = '';
      colDiv.appendChild(span);
    } else {
      for (let n of hints) {
        const span = document.createElement('div');
        span.className = 'hint-num';
        span.textContent = n;
        colDiv.appendChild(span);
      }
    }
    columnsWrap.appendChild(colDiv);
  }
  colHintsEl.appendChild(columnsWrap);

  // è¡Œãƒ’ãƒ³ãƒˆï¼ˆå·¦ï¼‰
  rowHintsEl.innerHTML = '';
  const rowHints = computeRowHints(solution);
  for (let r=0;r<GRID_SIZE;r++){
    const rowDiv = document.createElement('div');
    rowDiv.className = 'row';
    const hints = rowHints[r];
    // å³å¯„ã›ã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã€ãã®ã¾ã¾æ¨ªä¸¦ã³ã§è¿½åŠ 
    if (hints.length === 0) {
      const span = document.createElement('span');
      span.className = 'hint-num';
      span.textContent = '';
      rowDiv.appendChild(span);
    } else {
      // è¤‡æ•°å€‹ã®æ•°å­—ã‚’è¡¨ç¤º
      for (let n of hints) {
        const span = document.createElement('span');
        span.className = 'hint-num';
        span.textContent = n;
        rowDiv.appendChild(span);
      }
    }
    rowHintsEl.appendChild(rowDiv);
  }
}

/* ã‚°ãƒªãƒƒãƒ‰ï¼ˆã‚»ãƒ«ï¼‰ã‚’ä½œã‚‹ */
function buildGrid() {
  cellsEl.innerHTML = '';
  cellsEl.style.gridTemplateColumns = `repeat(${GRID_SIZE}, var(--size))`;
  for (let r=0;r<GRID_SIZE;r++){
    for (let c=0;c<GRID_SIZE;c++){
      const div = document.createElement('div');
      div.className = 'cell';
      div.id = `cell-${r}-${c}`;
      div.dataset.r = r; div.dataset.c = c;
      // ã‚¯ãƒªãƒƒã‚¯
      div.addEventListener('click', (e) => {
        e.preventDefault();
        toggleFill(r,c);
      });
      // å³ã‚¯ãƒªãƒƒã‚¯ã§ãƒãƒ¼ã‚¯ï¼ˆÃ—ï¼‰
      div.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        toggleMark(r,c);
      });
      cellsEl.appendChild(div);
    }
  }
}

/* çŠ¶æ…‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */
function renderGrid(){
  for (let r=0;r<GRID_SIZE;r++){
    for (let c=0;c<GRID_SIZE;c++){
      const el = document.getElementById(`cell-${r}-${c}`);
      const s = state[r][c];
      el.classList.remove('filled','marked');
      el.textContent = '';
      if (s === 1) {
        el.classList.add('filled');
      } else if (s === 2) {
        el.classList.add('marked');
        el.textContent = 'âœ•';
      }
    }
  }
}

/* å¡—ã‚Šã¤ã¶ã—ãƒˆã‚°ãƒ«ï¼ˆå·¦ã‚¯ãƒªãƒƒã‚¯ï¼‰ */
function toggleFill(r,c){
  const cur = state[r][c];
  if (cur === 1) state[r][c] = 0;
  else state[r][c] = 1;
  // å¡—ã‚Šã«ã—ãŸã‚‰ãƒãƒ¼ã‚¯ã‚’è§£é™¤
  if (state[r][c] === 1) {
    // nothing else
  }
  renderGrid();
  saveProgress();
  checkWin();
}

/* ãƒãƒ¼ã‚¯ãƒˆã‚°ãƒ«ï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ï¼‰ */
function toggleMark(r,c){
  const cur = state[r][c];
  if (cur === 2) state[r][c] = 0;
  else state[r][c] = 2;
  // ãƒãƒ¼ã‚¯ã«ã—ãŸã‚‰å¡—ã‚Šã¯æ¶ˆã™
  if (state[r][c] === 2) {
    // nothing else
  }
  renderGrid();
  saveProgress();
}

/* å‹åˆ©åˆ¤å®š */
function checkWin(){
  for (let r=0;r<GRID_SIZE;r++){
    for (let c=0;c<GRID_SIZE;c++){
      const need = solution[r][c];
      const have = state[r][c] === 1 ? 1 : 0; // ãƒãƒ¼ã‚¯ã¯å¡—ã‚Šã§ã¯ãªã„
      if (need !== have) return false;
    }
  }
  // å…¨ã¦ä¸€è‡´ã—ãŸã‚‰ win
  showWin();
  return true;
}

function showWin(){
  winEl.style.display = 'flex';
}

/* åˆæœŸåŒ– */
function init(){
  renderHints();
  buildGrid();
  const loaded = loadProgress();
  if (loaded) {
    renderGrid();
  } else {
    renderGrid();
  }
}

document.getElementById('btn-reset').addEventListener('click', () => {
  state = Array.from({length: GRID_SIZE}, () => Array(GRID_SIZE).fill(0));
  renderGrid();
  saveProgress();
});
document.getElementById('btn-reveal').addEventListener('click', () => {
  // è§£ç­”è¡¨ç¤ºï¼ˆå¡—ã‚Šã«ã™ã‚‹ï¼‰
  for (let r=0;r<GRID_SIZE;r++) for (let c=0;c<GRID_SIZE;c++) state[r][c] = solution[r][c] ? 1 : 0;
  renderGrid();
});
document.getElementById('btn-clear-local').addEventListener('click', () => {
  if (confirm("ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã‚’ã‚¯ãƒªã‚¢ã—ã¦åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿ")) {
    clearProgress();
  }
});
document.getElementById('win-close').addEventListener('click', () => { winEl.style.display = 'none'; });

init();
</script>
</body>
</html>
